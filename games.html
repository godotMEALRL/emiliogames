<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jockey+One&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        h1 {
            font-family: 'Lilita One', preconnect;
        }
        h2 {
            font-family: 'Jockey One', preconnect;
        }
        .iframe-container {
            width: 75%;
            height: 650px;
        }
        #game-iframe, #form-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        #toggleButton {
            position: fixed;
            top: 10px;
            right: 10px;
        }

    </style>
</head>
<body>
    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="emiliolinux" data-description="Support me on Buy me a coffee!" data-message="I would greatly appreciate your support." data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18"></script>    

    <button id="toggleButton" onclick="toggleNotifications()">Enable Anti-Virus</button>
    <script>
        let notificationInterval;
        let showNotification = false;

        function toggleNotifications() {
            if (showNotification) {
                clearInterval(notificationInterval);
                document.getElementById('toggleButton').innerText = 'Enable Anti-Virus';
            } else {
                if ("Notification" in window) {
                    Notification.requestPermission().then(function (permission) {
                        if (permission === "granted") {
                            // Set a timer for the first notification to appear after 10 seconds
                            setTimeout(() => {
                                showNotification = true;
                                notificationInterval = setInterval(() => {
                                    new Notification("Virus Alert!", {
                                        body: "5 viruses detected on your Chromebook! McAfee recommends immediate action.",
                                        icon: "https://1000logos.net/wp-content/uploads/2020/09/McAfee-Logo-500x281.png"
                                    });
                                }, 3500); // Subsequent notifications every 5 seconds
                            }, 2000); // Initial notification after 10 seconds
                            document.getElementById('toggleButton').innerText = 'Disable Anti-Virus';
                        } else {
                            alert("This browser does not support desktop notifications.");
                        }
                    });
                }
            }

            // Toggle state
            showNotification = !showNotification;
        }
    </script>

    <h1>There are <span style="color: #38d638;">More<span>Games</h1>
    <div>
        <button onclick="window.location.href = 'https://seraph.reveriestudios.online/';">Seraph</button>
        <button onclick="window.location.href = 'http://yixboost.nl.eu.org/yixboost/';">Yixboost</button>
    </div>
    <h2>Unblocked Games</h2>
    <p> </p>
    <p> </p>
    <p> </p>
    <button onclick="window.location.href = 'home.html';">HOME</button>
    <p> </p>
    <button onclick="window.location.href = 'chat.html';">CHAT</button>
    <p> </p>
    <button onclick="window.location.href = 'proxy.html';">PROXY</button>
    <p> </p>
    <p> Monkey GG</p>
    <button class="fullscreen-button" onclick="toggleFullscreen()">Fullscreen</button>
    <button class="mute-button" onclick="toggleMute()">Mute</button>
    <p> </p>
    <p> </p>
    <div class="iframe-container">
        <p> </p>
        <iframe id="game-iframe" src="https://monkeygg2.github.io/" title="Game"></iframe>
        <p> </p>
    </div>
    <script>
        // Function to toggle mute for the game iframe
        function toggleMute() {
            const muteButton = document.querySelector('.mute-button');
            const iframe = document.getElementById('game-iframe');

            let isMuted = muteButton.innerText === "Mute";
            iframe.contentWindow.postMessage({ action: isMuted ? 'mute' : 'unmute' }, '*');
            muteButton.innerText = isMuted ? "Unmute" : "Mute";
        }

        // Function to toggle fullscreen for the game iframe
        function toggleFullscreen() {
            const iframe = document.getElementById('game-iframe');
            if (iframe.requestFullscreen) {
                iframe.requestFullscreen();
            } else if (iframe.mozRequestFullScreen) {
                iframe.mozRequestFullScreen();
            } else if (iframe.webkitRequestFullscreen) {
                iframe.webkitRequestFullscreen();
            } else if (iframe.msRequestFullscreen) {
                iframe.msRequestFullscreen();
            }
        }

        // Call askForName on page load
        window.onload = function() {
            askForName();
            loadIframeState(); // Load the saved iframe state
            loadGameState(); // Load the game state
        };

        // Save iframe state on page reload/close
        window.onbeforeunload = function() {
            saveIframeState(); // Save the iframe state
        };

        // Game state management
        let gameState = {
            level: 1,
            score: 0
        };

        // Function to save the game state to localStorage
        function saveGameState() {
            localStorage.setItem('gameState', JSON.stringify(gameState));
            console.log('Game state saved:', gameState);
        }

        // Function to load the game state from localStorage
        function loadGameState() {
            let savedState = localStorage.getItem('gameState');
            if (savedState) {
                gameState = JSON.parse(savedState);
                console.log('Loaded game state:', gameState);
            } else {
                console.log('No saved game state found.');
            }
        }

        // Function to save iframe state
        function saveIframeState() {
            let iframe = document.querySelector("iframe[src='https://browser.rammerhead.org/']");
            if (iframe) {
                sessionStorage.setItem('rammerheadState', iframe.src);
            }
        }

        // Function to load iframe state
        function loadIframeState() {
            let savedIframeState = sessionStorage.getItem('rammerheadState');
            let iframe = document.querySelector("iframe[src='https://browser.rammerhead.org/']");
            if (savedIframeState && iframe) {
                iframe.src = savedIframeState;
                console.log('Restored iframe state:', savedIframeState);
            }
        }

        // Simulate gameplay function
        function playGame() {
            gameState.score += 10; // Example of gameplay
            console.log('Playing game, current score:', gameState.score);
            saveGameState(); // Save game state after gameplay
        }
    </script>

    <footer>
        <p>&copy; 2024 Fictus Game Development Studio. All rights reserved.</p>
    </footer>
</body>
</html>
