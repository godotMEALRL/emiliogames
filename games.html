<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmilioGames</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jockey+One&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        h1 {
            font-family: 'Lilita One', preconnect;
        }
        h2 {
            font-family: 'Jockey One', preconnect;
        }
        .iframe-container {
            width: 65%;
            height: 550px;
        }
        #game-iframe, #form-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    
<!-- Start of OpenWidget (www.openwidget.com) code -->
<script>
  window.__ow = window.__ow || {};
  window.__ow.organizationId = "8b18472c-53f9-45d9-8e73-ed12234223b2";
  window.__ow.integration_name = "manual_settings";
  window.__ow.product_name = "openwidget";   
  ;(function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[OpenWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.openwidget.com/openwidget.js",t.head.appendChild(n)}};!n.__ow.asyncInit&&e.init(),n.OpenWidget=n.OpenWidget||e}(window,document,[].slice))
</script>
<noscript>You need to <a href="https://www.openwidget.com/enable-javascript" rel="noopener nofollow">enable JavaScript</a> to use the communication tool powered by <a href="https://www.openwidget.com/" rel="noopener nofollow" target="_blank">OpenWidget</a></noscript>
<!-- End of OpenWidget code -->

    <h1>QAS<span style="color: #008000;">GG<span> 2!!!</h1>
    <h2>MonkeyGG2 on vercel.app</h2>
    <p id="greeting">Welcome!</p>
    <p> </p>
    <button onclick="window.location.href = 'index.html';">HOME</button>
    <p> </p>
    <button onclick="window.location.href = 'proxy.html';">PROXY</button>
    <p> </p>
    <script src="https://cdn.commoninja.com/sdk/latest/commonninja.js" defer></script>
    <div class="commonninja_component pid-1169bceb-1b8d-4c1f-b4e6-860ba81f3f4a"></div>
    <p> </p>
    
    <h1>QASGG2</h1>
    <h2>Click Here!!!!</h2>
    <button class="fullscreen-button" onclick="toggleFullscreen()">Fullscreen</button>
    <button class="mute-button" onclick="toggleMute()">Mute</button>
    
    <div class="iframe-container">
        <iframe id="game-iframe" src="https://monkeygg2.github.io/" title="QASGG2"></iframe>
    </div>

    <script>
        // Redirect to crazygames.com if the username is not valid
        function redirectToCrazyGames() {
            window.location.href = "https://crazygames.com";
        }

        // Function to ask for user's name
        function askForName() {
            let storedName = localStorage.getItem('userName');
            const validUsernames = ["joker", "sigma"];

            if (!storedName) {
                let name;
                do {
                    name = prompt("Enter your joker or sigma:");
                    if (!name) {
                        name = "Guest"; // Handle cancel case
                    }
                } while (!validUsernames.includes(name.toLowerCase())); 

                localStorage.setItem('userName', name);
                document.getElementById("greeting").innerText = "Hello, " + name + "!";
            } else {
                document.getElementById("greeting").innerText = "Hello, " + storedName + "!";
            }
        }

        // Function to toggle mute for the game iframe
        function toggleMute() {
            const muteButton = document.querySelector('.mute-button');
            const iframe = document.getElementById('game-iframe');

            let isMuted = muteButton.innerText === "Mute";
            iframe.contentWindow.postMessage({ action: isMuted ? 'mute' : 'unmute' }, '*');
            muteButton.innerText = isMuted ? "Unmute" : "Mute";
        }

        // Function to toggle fullscreen for the game iframe
        function toggleFullscreen() {
            const iframe = document.getElementById('game-iframe');
            if (iframe.requestFullscreen) {
                iframe.requestFullscreen();
            } else if (iframe.mozRequestFullScreen) {
                iframe.mozRequestFullScreen();
            } else if (iframe.webkitRequestFullscreen) {
                iframe.webkitRequestFullscreen();
            } else if (iframe.msRequestFullscreen) {
                iframe.msRequestFullscreen();
            }
        }

        // Call askForName on page load
        window.onload = function() {
            askForName();
            loadIframeState(); // Load the saved iframe state
            loadGameState(); // Load the game state
        };

        // Save iframe state on page reload/close
        window.onbeforeunload = function() {
            saveIframeState(); // Save the iframe state
        };

        // Game state management
        let gameState = {
            level: 1,
            score: 0
        };

        // Function to save the game state to localStorage
        function saveGameState() {
            localStorage.setItem('gameState', JSON.stringify(gameState));
            console.log('Game state saved:', gameState);
        }

        // Function to load the game state from localStorage
        function loadGameState() {
            let savedState = localStorage.getItem('gameState');
            if (savedState) {
                gameState = JSON.parse(savedState);
                console.log('Loaded game state:', gameState);
            } else {
                console.log('No saved game state found.');
            }
        }

        // Function to save iframe state
        function saveIframeState() {
            let iframe = document.querySelector("iframe[src='https://browser.rammerhead.org/']");
            if (iframe) {
                sessionStorage.setItem('rammerheadState', iframe.src);
            }
        }

        // Function to load iframe state
        function loadIframeState() {
            let savedIframeState = sessionStorage.getItem('rammerheadState');
            let iframe = document.querySelector("iframe[src='https://browser.rammerhead.org/']");
            if (savedIframeState && iframe) {
                iframe.src = savedIframeState;
                console.log('Restored iframe state:', savedIframeState);
            }
        }

        // Simulate gameplay function
        function playGame() {
            gameState.score += 10; // Example of gameplay
            console.log('Playing game, current score:', gameState.score);
            saveGameState(); // Save game state after gameplay
        }
    </script>

    <footer>
        <p>&copy; 2024 Fictus Game Development Studio. All rights reserved.</p>
    </footer>
</body>
</html>
